{
  "schema_version": "1",
  "id": "anthropic",
  "display_name": "Anthropic / Claude API",
  "description": "Set up API access for Claude and other Anthropic models.",
  "category": ["ai", "llm"],
  "website": "https://console.anthropic.com",
  "auth_types": ["api_key"],
  "estimated_time": "5 minutes",
  "prerequisites": [
    "An Anthropic account"
  ],
  "outputs": [
    {
      "key": "ANTHROPIC_API_KEY",
      "description": "API key for authenticating requests to the Anthropic API",
      "sensitive": true
    }
  ],
  "steps": [
    {
      "id": "intro",
      "type": "info",
      "message": "We'll get you an Anthropic API key for using Claude models. You'll need to add a payment method or have existing credits -- the API is pay-per-use."
    },
    {
      "id": "open_console",
      "type": "open_url",
      "url": "https://console.anthropic.com",
      "message": "Opening the Anthropic Console. Sign in or create an account if prompted."
    },
    {
      "id": "check_billing",
      "type": "prompt_choice",
      "message": "Do you have billing set up (payment method or credits)?",
      "choices": [
        { "label": "Yes, billing is set up", "next": "navigate_keys" },
        { "label": "No / Not sure", "next": "setup_billing" }
      ]
    },
    {
      "id": "setup_billing",
      "type": "open_url",
      "url": "https://console.anthropic.com/settings/billing",
      "message": "Opening billing settings. Add a payment method or purchase credits to enable API access."
    },
    {
      "id": "confirm_billing",
      "type": "prompt_confirm",
      "message": "Billing set up?"
    },
    {
      "id": "navigate_keys",
      "type": "open_url",
      "url": "https://console.anthropic.com/settings/keys",
      "message": "Opening the API Keys page."
    },
    {
      "id": "create_key",
      "type": "info",
      "message": "Click 'Create Key'. Give it a descriptive name (e.g., your project name)."
    },
    {
      "id": "collect_key",
      "type": "prompt_input",
      "output_key": "ANTHROPIC_API_KEY",
      "message": "Copy your API key and paste it here (starts with sk-ant-):",
      "validation": "^sk-ant-[a-zA-Z0-9_-]{20,}$",
      "validation_error": "That doesn't look like a valid Anthropic API key. It should start with 'sk-ant-' followed by a long string."
    },
    {
      "id": "validate_key",
      "type": "validate",
      "method": "http_get",
      "depends_on": ["collect_key"],
      "message": "Checking your API key works...",
      "on_success": "API key verified. You're ready to use Claude.",
      "on_failure": "Couldn't verify the API key. Make sure billing is set up and the key is active.",
      "config": {
        "url": "https://api.anthropic.com/v1/models",
        "header_name": "x-api-key",
        "header_value": "{{ANTHROPIC_API_KEY}}"
      }
    }
  ],
  "gotchas": [
    "API keys are shown only once when created. If you lose it, you'll need to create a new one.",
    "The Anthropic API requires an 'anthropic-version' header (e.g., '2023-06-01'). Most client libraries handle this automatically.",
    "New accounts start with lower rate limits (Tier 1). Limits increase automatically as you spend more.",
    "Set a monthly spending limit in the Console to avoid unexpected charges.",
    "Claude models have different pricing tiers. Claude Haiku is the cheapest; Claude Opus is the most capable and most expensive.",
    "The API uses 'x-api-key' header for authentication, not the more common 'Authorization: Bearer' pattern."
  ],
  "version": "1.0.0",
  "last_verified": "2026-02-15"
}
